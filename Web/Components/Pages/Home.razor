@page "/"

<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>


<div>
    <ul>
        @foreach (Game game in Lobby.Games)
        {
            <li>
                <a href=@($"/game/{game.Name}")>
                    @game.Name - Player = (@game.NumberOfPlayer)
                </a>
            </li>
        }

    </ul>
    New Game Name: <input @bind=NameInput placeholder="Type New Name" type="text">
    <button @onclick=CreateGame>Create Game</button>
</div>


@code
{
    string NameInput;

    protected override void OnInitialized()
    {
        Lobby.GameListChanged += Refresh;
    }
    void CreateGame()
    {
        Game newGame = new Game();
        newGame.Name = NameInput;
        NameInput = "";
        Lobby.Games.Add(newGame);


        Lobby.RunGameListChangedEvent();
    }
    void Refresh()
    {
        InvokeAsync(StateHasChanged);
    }
}
